<!DOCTYPE html>
<html lang="zh-cn" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Scala 和 Java 的混合编译指南 - 东海一叶</title>
  

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="东海一叶" />
  <meta name="description" content="使用 Scala 开发不可避免地会涉及与 Java 的混合编译，这里记录下这两天的发现。 全文的基础如下： 图片来源：如何在 Java App 中導入 Scala，另外本文也大量参考了" />

  <meta name="keywords" content="Hugo, billryan, 博客, 东海一叶" />






<meta name="generator" content="Hugo 0.62.0" />


<link rel="canonical" href="https://blog.yuanbin.me/posts/2015-08/2015-08-04_17-29-01/" />





<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/sass/jane.min.af20b78e95c84de86b00a0242a4a77bd2601700e1b250edf27537d957ac0041d.css" integrity="sha256-ryC3jpXITehrAKAkKkp3vSYBcA4bJQ7fJ1N9lXrABB0=" media="screen" crossorigin="anonymous">




<link rel="stylesheet" href="/css/custom.css">


<meta property="og:title" content="Scala 和 Java 的混合编译指南" />
<meta property="og:description" content="使用 Scala 开发不可避免地会涉及与 Java 的混合编译，这里记录下这两天的发现。 全文的基础如下： 图片来源：如何在 Java App 中導入 Scala，另外本文也大量参考了" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.yuanbin.me/posts/2015-08/2015-08-04_17-29-01/" />
<meta property="article:published_time" content="2015-08-04T17:29:01+08:00" />
<meta property="article:modified_time" content="2020-02-02T12:44:46+08:00" />
<meta itemprop="name" content="Scala 和 Java 的混合编译指南">
<meta itemprop="description" content="使用 Scala 开发不可避免地会涉及与 Java 的混合编译，这里记录下这两天的发现。 全文的基础如下： 图片来源：如何在 Java App 中導入 Scala，另外本文也大量参考了">
<meta itemprop="datePublished" content="2015-08-04T17:29:01&#43;08:00" />
<meta itemprop="dateModified" content="2020-02-02T12:44:46&#43;08:00" />
<meta itemprop="wordCount" content="1733">



<meta itemprop="keywords" content="Scala,Java," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Scala 和 Java 的混合编译指南"/>
<meta name="twitter:description" content="使用 Scala 开发不可避免地会涉及与 Java 的混合编译，这里记录下这两天的发现。 全文的基础如下： 图片来源：如何在 Java App 中導入 Scala，另外本文也大量参考了"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-32317667-4', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">东海一叶</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://blog.yuanbin.me/">主页</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://blog.yuanbin.me/post/">全部文章</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://blog.yuanbin.me/tags/">标签</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://blog.yuanbin.me/categories/">分类</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://blog.yuanbin.me/about/">关于</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://blog.yuanbin.me/index.xml">订阅</a>
          
        
      </li>
    

    
      <li class="mobile-menu-item">
        <a id="openSearchMobile" class="mobile-menu-item-link menu-item-search" href="#">
          <i class="iconfont">
            <svg version="1.1" viewBox="0 0 1024 1024"
  xmlns="http://www.w3.org/2000/svg" width="18" height="18"
  xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M973.81454219 973.81454219a91.78207815 91.78207815 0 0 1-129.80999631 0l-161.97482118-161.97482118a425.48527711 425.48527711 0 0 1-230.35931791 68.16531768 428.3346319 428.3346319 0 1 1 428.3346319-428.3346319 425.48527711 425.48527711 0 0 1-68.16531768 230.35931791l162.02961656 161.97482118a91.83687354 91.83687354 0 0 1-0.05479538 129.80999631zM451.67040679 145.69361559a305.97679241 305.97679241 0 1 0 0 611.95358361 305.97679241 305.97679241 0 0 0 0-611.95358361z">
  </path>
</svg>

          </i>
        </a>
      </li>
    
  </ul>
</nav>


  
    






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

  

  
    
<div class="modal-dialog">
    
    <div class="modal-content">
      <div id="closeSearch" title="Close" class="close">X</div>
      <div class="modal-header">
        <div class="modal-title">Search</div>
      </div>
      <div class="modal-body">
          <script>
            (function() {
              var cx = '018220290031572399476:pa4brobb2ji';
              var gcse = document.createElement('script');
              gcse.type = 'text/javascript';
              gcse.async = true;
              gcse.src = (document.location.protocol == 'https:' ? 'https:' :
                  'http:') +
                '//cse.google.com/cse.js?cx=' + cx;
              var s = document.getElementsByTagName('script')[0];
              s.parentNode.insertBefore(gcse, s);
            })();
          </script>
          <gcse:search></gcse:search>
      </div>
    </div>
</div>

  

  

  <header id="header" class="header container">
    <div class="logo-wrapper">
  <a href="/" class="logo">
    
      东海一叶
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://blog.yuanbin.me/">主页</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://blog.yuanbin.me/post/">全部文章</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://blog.yuanbin.me/tags/">标签</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://blog.yuanbin.me/categories/">分类</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://blog.yuanbin.me/about/">关于</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://blog.yuanbin.me/index.xml">订阅</a>
          

        

      </li>
    

    
    

    
      <li class="menu-item">
        <a id="openSearch" class="menu-item-link menu-item-search" href="#">
          <i class="iconfont">
            <svg version="1.1" viewBox="0 0 1024 1024"
  xmlns="http://www.w3.org/2000/svg" width="18" height="18"
  xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M973.81454219 973.81454219a91.78207815 91.78207815 0 0 1-129.80999631 0l-161.97482118-161.97482118a425.48527711 425.48527711 0 0 1-230.35931791 68.16531768 428.3346319 428.3346319 0 1 1 428.3346319-428.3346319 425.48527711 425.48527711 0 0 1-68.16531768 230.35931791l162.02961656 161.97482118a91.83687354 91.83687354 0 0 1-0.05479538 129.80999631zM451.67040679 145.69361559a305.97679241 305.97679241 0 1 0 0 611.95358361 305.97679241 305.97679241 0 0 0 0-611.95358361z">
  </path>
</svg>

          </i>
        </a>
      </li>
    
  </ul>
</nav>

  </header>

  <div id="mobile-panel">
    <main id="main" class="main bg-llight">
      <div class="content-wrapper">
        <div id="content" class="content container">
          <article class="post bg-white">
    
    <header class="post-header">
      <h1 class="post-title">Scala 和 Java 的混合编译指南</h1>
      
      <div class="post-meta">
        <time datetime="2015-08-04" class="post-time">
          2015-08-04
        </time>
        <div class="post-category">
            <a href="https://blog.yuanbin.me/categories/%E6%8A%80%E6%9C%AF/"> 技术 </a>
            
          </div>
        

        
        
          <span id="busuanzi_container_page_pv">
            | 阅读 <span id="busuanzi_value_page_pv"></span>
          </span>
        

        
        
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#-scala--java---sbt">在 Scala 中使用 Java - sbt</a>
      <ul>
        <li><a href="#directory-structure">目录结构(Directory Structure)</a></li>
        <li><a href="#heading">构建控制</a></li>
        <li><a href="#heading-1">依赖库管理</a></li>
        <li><a href="#1----java-">实战1 - 使用 Java 源码进行联合编译</a></li>
        <li><a href="#2----java--jar-unmanaged-dependencies">实战2 - 使用 Java 生成的 jar 包(Unmanaged dependencies)</a></li>
        <li><a href="#3---maven-repository-library">实战3 - 使用Maven Repository Library</a></li>
        <li><a href="#-jar-">部署单一可执行的 jar 文件</a></li>
      </ul>
    </li>
    <li><a href="#-java--scala---maven">在 Java 中使用 Scala - Maven</a></li>
  </ul>
</nav>
  </div>
</div>

    
    <div class="post-content">
      <p>使用 Scala 开发不可避免地会涉及与 Java 的混合编译，这里记录下这两天的发现。
全文的基础如下：</p>
<p><img src="/pictures/images/misc/joint-compilation-of-scala-and-java.png" alt="Java 和 Scala 混合编译流程"></p>
<p>图片来源：<a href="http://www.slideshare.net/javatwo2011/java-app-scala">如何在 Java App 中導入 Scala</a>，另外本文也大量参考了 sbt 官方文档和 Alvin Alexander 的 <em>Scala Cookbook</em>, 先行谢过。</p>
<h2 id="-scala--java---sbt">在 Scala 中使用 Java - sbt</h2>
<p>Scala 下的构建工具首推 <a href="http://www.scala-sbt.org/">sbt</a>, sbt 可以简化软件构建和依赖管理过程，同时还可以使用 Scala 语言定制复杂的 task.</p>
<h3 id="directory-structure">目录结构(Directory Structure)</h3>
<p>受 Java 平台的 <a href="https://maven.apache.org/">Maven</a> 影响，sbt 使用的目录结构和 Maven 类似，一个基本的 sbt 目录结构如下所述：</p>
<pre><code>sbtProject
├── build.sbt
├── lib &lt;unmanaged dependencies jars&gt;
├── project
│   └── Build.scala (optional)
├── src
│   ├── main
│   │   ├── java &lt;main Java sources&gt;
│   │   ├── resources &lt;files to include in main jar here&gt;
│   │   └── scala &lt;main Scala sources&gt;
│   └── test
│       ├── java &lt;test Java sources&gt;
│       ├── resources &lt;files to include in test jar here&gt;
│       └── scala &lt;test Scala sources&gt;
└── target &lt;compiled classes, packaged jars, managed files, caches, and documentation&gt;
</code></pre><p>目录结构的初始化可以通过 Giter8 或者自定义 shell 脚本完成，以下是一个简易的目录生成脚本。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/sh
</span><span style="color:#75715e"></span>
mkdir -p src/<span style="color:#f92672">{</span>main,test<span style="color:#f92672">}</span>/<span style="color:#f92672">{</span>java,resources,scala<span style="color:#f92672">}</span>
mkdir lib project target
touch project/Build.scala

<span style="color:#75715e"># create an initial build.sbt file</span>
cat <span style="color:#e6db74">&lt;&lt;EOF &gt; build.sbt
</span><span style="color:#e6db74">name := &#34;sbtProject&#34;
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">version := &#34;1.0&#34;
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">scalaVersion := &#34;2.10.5&#34;
</span><span style="color:#e6db74">EOF</span>
</code></pre></div><h3 id="heading">构建控制</h3>
<p>构建过程由项目目录下的<code>build.sbt</code>和子目录<code>project</code>下的<code>*.scala</code> 共同控制。</p>
<h3 id="heading-1">依赖库管理</h3>
<p>依赖的库可通过 Unmanaged 和 Managed 两种方式添加，Unmanaged dependencies 通常放置于当前项目目录下的子目录<code>lib</code>, sbt 会将其作为 classpath.</p>
<p>另一种常见的方式为 Managed dependencies, 底层使用 Apache Ivy 作为库的依赖管理。添加依赖库在 sbt 中十分简单，最简洁的方式可以在<code>build.sbt</code> 中添加一行:</p>
<pre><code>libraryDependencies += groupID % artifactID % revision
</code></pre><p>对于多个依赖，自然可以写多行<code>libraryDependencies</code>, 也可使用<code>Seq</code>合并多行。</p>
<h3 id="1----java-">实战1 - 使用 Java 源码进行联合编译</h3>
<p>首先我们使用 Java 新建一 Employee 类，然后在 Scala 中调用之，目录结构如下：</p>
<pre><code>sbtTest
├── build.sbt
├── lib
├── project
│   └── Build.scala
├── src
│   ├── main
│   │   ├── java
│   │   │   └── me
│   │   │       └── yuanbin
│   │   │           └── java
│   │   │               └── Employee.java
│   │   ├── resources
│   │   └── scala
│   │       └── me
│   │           └── yuanbin
│   │               └── testproject
│   │                   └── Hello.scala
│   └── test
│       ├── java
│       ├── resources
│       └── scala
└── target
</code></pre><p>我们在 Java 中新建 Employee 类：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> me.yuanbin.java<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Employee</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> String name<span style="color:#f92672">;</span>
    
    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Employee</span><span style="color:#f92672">(</span>String n<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        name <span style="color:#f92672">=</span> n<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    
    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">getName</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> name<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>Scala 中使用 Java 中创建的类：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala"><span style="color:#66d9ef">package</span> me.yuanbin.testproject

<span style="color:#66d9ef">import</span> me.yuanbin.java._

<span style="color:#66d9ef">object</span> <span style="color:#a6e22e">Hello</span> <span style="color:#f92672">{</span>
  <span style="color:#66d9ef">def</span> main<span style="color:#f92672">(</span>args<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Array</span><span style="color:#f92672">[</span><span style="color:#66d9ef">String</span><span style="color:#f92672">]</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">val</span> p <span style="color:#66d9ef">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Employee</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Bill Ryan&#34;</span><span style="color:#f92672">)</span>
    println<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Hello from &#34;</span> <span style="color:#f92672">+</span> p<span style="color:#f92672">.</span>getName<span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span>
  <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>在项目的基目录下运行<code>sbt run</code>应该就能看的<code>Hello from Bill Ryan</code>字样了。如果想深入了解 sbt 中编译 Java 代码的话，其官网链接值得关注 - <a href="http://www.scala-sbt.org/0.13/docs/Java-Sources.html">sbt Reference Manual — Java Sources</a></p>
<h3 id="2----java--jar-unmanaged-dependencies">实战2 - 使用 Java 生成的 jar 包(Unmanaged dependencies)</h3>
<p>源码和目录结构同实战1，不过为了说明问题可在生成 jar 包后删除 Java 部分的源码和 class 文件。</p>
<p><strong>Note: Java 经验不足的建议看看打包相关知识，<a href="https://newcircle.com/bookshelf/java_fundamentals_tutorial/packaging">Java Fundamentals Tutorial: Packaging</a> 不错。</strong></p>
<ol>
<li>进入 Java 源码目录下, <code>cd src/main/java</code> (打包依赖于目录结构, 否则生成的 jar 包无法正常使用)</li>
<li>编译生成<code>.class</code>类文件，<code>javac javac me/yuanbin/java/Employee.java</code></li>
<li>由<code>.class</code> 生成 jar 包，<code>jar cvf Employee.jar me/yuanbin/java/Employee.class</code></li>
<li>将生成的 jar 包放入项目的<code>lib</code> 目录下供 sbt 添加至 classpath, <code>mv Employee.jar lib/</code></li>
</ol>
<p>在项目基目录下运行<code>sbt run</code>应该同样能看到<code>Hello from Bill Ryan</code> 字样。</p>
<h3 id="3---maven-repository-library">实战3 - 使用Maven Repository Library</h3>
<p>本小节参考自 <a href="http://alvinalexander.com/scala/simple-scala-akka-actor-examples-hello-world-actors">Simple Scala Akka Actor examples</a></p>
<p>在 sbt 中使用 Maven 仓库非常简单，将 Maven 的groupId, artifactId, 和 version 域更改为 sbt libraryDependencies 字符串即可。以 Akka Actor 为例，相应的 Maven 依赖写法如下：</p>
<pre><code>&lt;dependency&gt;
	&lt;groupId&gt;com.typesafe.akka&lt;/groupId&gt;
	&lt;artifactId&gt;akka-actor_2.10&lt;/artifactId&gt;
	&lt;version&gt;2.3.12&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><p>转化为 sbt 的 libraryDependencies 如下所示：</p>
<pre><code>libraryDependencies += &quot;com.typesafe.akka&quot; % &quot;akka-actor_2.10&quot; % &quot;2.3.12&quot;
</code></pre><p>将以上一行加入至项目根目录的<code>build.sbt</code>下，添加 scala 源码，<code>vim src/main/scala/Hello.scala</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala"><span style="color:#66d9ef">import</span> akka.actor.Actor
<span style="color:#66d9ef">import</span> akka.actor.ActorSystem
<span style="color:#66d9ef">import</span> akka.actor.Props
 
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HelloActor</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Actor</span> <span style="color:#f92672">{</span>
  <span style="color:#66d9ef">def</span> receive <span style="color:#66d9ef">=</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;hello&#34;</span> <span style="color:#66d9ef">=&gt;</span> println<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;hello back at you&#34;</span><span style="color:#f92672">)</span>
    <span style="color:#66d9ef">case</span> <span style="color:#66d9ef">_</span>       <span style="color:#66d9ef">=&gt;</span> println<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;huh?&#34;</span><span style="color:#f92672">)</span>
  <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
 
<span style="color:#66d9ef">object</span> <span style="color:#a6e22e">Main</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">App</span> <span style="color:#f92672">{</span>
  <span style="color:#66d9ef">val</span> system <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">ActorSystem</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;HelloSystem&#34;</span><span style="color:#f92672">)</span>
  <span style="color:#75715e">// default Actor constructor
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">val</span> helloActor <span style="color:#66d9ef">=</span> system<span style="color:#f92672">.</span>actorOf<span style="color:#f92672">(</span><span style="color:#a6e22e">Props</span><span style="color:#f92672">[</span><span style="color:#66d9ef">HelloActor</span><span style="color:#f92672">]</span><span style="color:#f92672">,</span> name <span style="color:#66d9ef">=</span> <span style="color:#e6db74">&#34;helloactor&#34;</span><span style="color:#f92672">)</span>
  helloActor <span style="color:#f92672">!</span> <span style="color:#e6db74">&#34;hello&#34;</span>
  helloActor <span style="color:#f92672">!</span> <span style="color:#e6db74">&#34;buenos dias&#34;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>在项目基目录下运行<code>sbt run</code>, 终端下应该会显示<code>hello ...</code> 等字样。</p>
<p>使用 sbt 的三种常见的 Scala/Java 混合编译方法就介绍到这了。</p>
<h3 id="-jar-">部署单一可执行的 jar 文件</h3>
<p>使用<code>sbt package</code>的确可以生成 jar 包，但是问题来了，怎样执行这些 jar 包呢？这些 jar 包由 sbt 创建，自然是可以在 scala 解释器中运行，但是想让 Java 也能执行这个 jar 包就得废些功夫了，原因在于 sbt 生成的 jar 包中包含一些 Scala 特有的东西，而这些东西则包含在<em>scala-library.jar</em> 这个 jar 包中。所以我们可以总结出如下三种方法运行 sbt 生成的 jar 包。</p>
<ol>
<li>将需要的 jar 包分发至 classpath 并用 scala 执行。这种方法需要在执行系统上安装有 Scala.</li>
<li>将 jar 包及 Scala 的核心库分发至 classpath, 使用 java 执行。这种方法只需要在执行系统上安装 Java.</li>
<li>使用 sbt 插件如 sbt-assembly 构建生成单一完整的 jar 包供 Java 执行，这样一来就不需要 Scala 的核心库了。</li>
</ol>
<p>sbt 的使用可参考官方文档，另外 <a href="https://github.com/CSUG/real_world_scala/blob/master/02_sbt.markdown">CSUG/real_world_scala</a> 也可参考看看别人的实践。</p>
<h2 id="-java--scala---maven">在 Java 中使用 Scala - Maven</h2>
<p>Scala 中如何使用 Java 的部分已梳理完毕，这里就 Java 中如何编译 Scala 做些记录。</p>
<p>这一部分可参考如下两大链接：</p>
<ul>
<li><a href="http://docs.scala-lang.org/tutorials/scala-with-maven.html">Scala with Maven - Scala Documentation</a></li>
<li><a href="https://github.com/davidB/scala-maven-plugin">davidB/scala-maven-plugin</a></li>
</ul>

    </div>

    
    
<div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">东海一叶</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
      2020-02-02
      
        <a href="https://github.com/billryan/blog/commit/c006d89ffe4bba3b7e663698f582491ea68af5ac" title="fix urls">
          (c006d89)
        </a>
        
          <br>fix urls
        
      
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">许可协议</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>


    
    
<div class="post-reward">
  <input type="checkbox" name="reward" id="reward" hidden />
  <label class="reward-button" for="reward">赞赏支持</label>
  <div class="qr-code">
    
    
      <label class="qr-code-image" for="reward">
        <img class="image" src="/images/wechat.jpg">
        <span>微信打赏</span>
      </label>
    
      <label class="qr-code-image" for="reward">
        <img class="image" src="/images/alipay.jpg">
        <span>支付宝打赏</span>
      </label>
  </div>
</div>

    <footer class="post-footer">
      <div class="post-tags">
          <a href="https://blog.yuanbin.me/tags/scala/">Scala</a>
          <a href="https://blog.yuanbin.me/tags/java/">Java</a>
          
        </div>

      
      <nav class="post-nav">
        
          <a class="prev" href="/posts/2015-08/2015-08-25_13-55-02/">
            
            <i class="iconfont">
              <svg  class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417 757.434875 204.940602c11.338233-12.190647 11.035334-32.285311-0.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-0.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891 0.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"></path>
</svg>

            </i>
            <span class="prev-text nav-default">Akka Notes 2 - Actor Messaging</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        
          <a class="next" href="/posts/2015-07/2015-07-19_16-26-10/">
            <span class="next-text nav-default">Deploy Hadoop cluster with Vagrant and Ambari</span>
            <span class="prev-text nav-mobile">下一篇</span>
            
            <i class="iconfont">
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311 0.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889 0.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-0.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697C361.493148 60.273758 343.054193 61.470003 332.091514 74.487481z"></path>
</svg>

            </i>
          </a>
      </nav>
    </footer>
  </article>

  
  

  
  

  

  
  
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo= "billryan/blog"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
      </script>
    </div>
  

  

  

  <div class="disqus-comment">
  <div class="disqus-button" id="load_disqus" onclick="load_disqus()">
    显示 Disqus 评论
  </div>
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_config = function () {
      this.page.url = "https://blog.yuanbin.me/posts/2015-08/2015-08-04_17-29-01/";
    };
    function load_disqus() {
      
      
      if (window.location.hostname === 'localhost') return;

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      var disqus_shortname = 'billryan';
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);

      $('#load_disqus').remove();
    };
  </script>
  <noscript>Please enable JavaScript to view the
    <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
  </noscript>
  
  </div>

    

  

        </div>
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="icon-links">
  
  
    <a href="mailto:yuanbin2014@gmail.com" rel="me noopener" class="iconfont"
      title="email" >
      <svg class="icon" viewBox="0 0 1451 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M664.781909 681.472759 0 97.881301C0 3.997201 71.046997 0 71.046997 0L474.477909 0 961.649408 0 1361.641813 0C1361.641813 0 1432.688811 3.997201 1432.688811 97.881301L771.345323 681.472759C771.345323 681.472759 764.482731 685.154773 753.594283 688.65053L753.594283 688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858L682.561621 688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759L664.781909 681.472759ZM718.063616 811.603883C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633 0 212.052267 0 212.052267L0 942.809523C0 942.809523 0 1024 83.726336 1024L682.532949 1024 753.579947 1024 1348.948139 1024C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523L1432.688811 212.052267C1432.688811 212.052267 893.138176 701.759633 817.019477 767.734955 777.248 802.205449 742.347691 811.03081 718.063616 811.603883L718.063616 811.603883Z"></path>
</svg>

    </a>
  
    <a href="https://www.linkedin.com/in/billryan8/" rel="me noopener" class="iconfont"
      title="linkedin"  target="_blank"
      >
      <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="33" height="33">
  <path d="M872.405333 872.618667h-151.637333v-237.610667c0-56.661333-1.152-129.578667-79.018667-129.578667-79.061333 0-91.136 61.653333-91.136 125.397334v241.792H398.976V384h145.664v66.602667h1.962667c20.352-38.4 69.845333-78.933333 143.786666-78.933334 153.642667 0 182.058667 101.12 182.058667 232.746667v268.202667zM227.712 317.141333a87.978667 87.978667 0 0 1-88.021333-88.106666 88.064 88.064 0 1 1 88.021333 88.106666z m76.032 555.477334H151.68V384h152.064v488.618667zM948.266667 0H75.562667C33.792 0 0 33.024 0 73.770667v876.458666C0 991.018667 33.792 1024 75.562667 1024h872.576C989.866667 1024 1024 991.018667 1024 950.229333V73.770667C1024 33.024 989.866667 0 948.138667 0h0.128z"></path>
</svg>

    </a>
  
    <a href="https://github.com/billryan" rel="me noopener" class="iconfont"
      title="github"  target="_blank"
      >
      <svg class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M512 12.672c-282.88 0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667 0-12.16-0.426667-44.373333-0.64-87.04-142.421333 30.890667-172.458667-68.693333-172.458667-68.693333C188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333 0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333 0 0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52 0.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667 0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72 0 68.522667-0.64 123.562667-0.64 140.202666 0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"></path>
</svg>

    </a>
  
    <a href="http://www.douban.com/people/billryan/" rel="me noopener" class="iconfont"
      title="douban"  target="_blank"
      >
      <svg class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M926.917973 37.80608C959.65184 37.80608 986.19392 64.34816 986.19392 97.082027L986.19392 926.917973C986.19392 959.65184 959.65184 986.19392 926.917973 986.19392L97.082027 986.19392C64.34816 986.19392 37.80608 959.65184 37.80608 926.917973L37.80608 97.082027C37.80608 64.34816 64.34816 37.80608 97.082027 37.80608zM176.653653 176.19968 176.653653 252.678827 825.658027 252.678827 825.658027 176.19968zM217.719467 316.146347 217.719467 628.08064 273.524053 628.08064 341.292373 770.39616 157.259093 770.39616 157.259093 845.417813 842.949973 845.417813 842.949973 770.39616 654.226773 770.39616 722.899627 628.08064 783.67744 628.08064 783.67744 316.146347zM684.885333 392.891733 684.885333 553.987413 312.576 553.987413 312.576 392.891733zM570.770773 770.39616 426.653013 770.39616 359.621973 628.08064 639.443627 628.08064z"></path>
</svg>

    </a>
  
    <a href="https://instagram.com/bin.yuan/" rel="me noopener" class="iconfont"
      title="instagram"  target="_blank"
      >
      <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M853.333333 277.333333C853.333333 289.28 843.946667 298.666667 832 298.666667L746.666667 298.666667C734.72 298.666667 725.333333 289.28 725.333333 277.333333L725.333333 192C725.333333 180.053333 734.72 170.666667 746.666667 170.666667L832 170.666667C843.946667 170.666667 853.333333 180.053333 853.333333 192M192 853.333333C180.053333 853.333333 170.666667 843.946667 170.666667 832L170.666667 469.333333 259.84 469.333333C257.28 482.986667 256 497.493333 256 512 256 653.226667 370.773333 768 512 768 653.226667 768 768 653.226667 768 512 768 497.493333 766.293333 482.986667 764.16 469.333333L853.333333 469.333333 853.333333 832C853.333333 843.946667 843.946667 853.333333 832 853.333333M512 341.333333C606.293333 341.333333 682.666667 417.706667 682.666667 512 682.666667 606.293333 606.293333 682.666667 512 682.666667 417.706667 682.666667 341.333333 606.293333 341.333333 512 341.333333 417.706667 417.706667 341.333333 512 341.333333M853.333333 85.333333 170.666667 85.333333C123.306667 85.333333 85.333333 123.306667 85.333333 170.666667L85.333333 853.333333C85.333333 900.266667 123.733333 938.666667 170.666667 938.666667L853.333333 938.666667C900.266667 938.666667 938.666667 900.266667 938.666667 853.333333L938.666667 170.666667C938.666667 123.306667 900.266667 85.333333 853.333333 85.333333Z"></path>
</svg>

    </a>


<a href="https://blog.yuanbin.me/index.xml" rel="noopener alternate" type="application/rss&#43;xml"
    class="iconfont" title="rss" target="_blank">
    <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="30" height="30">
  <path d="M819.157333 1024C819.157333 574.592 449.408 204.8 0 204.8V0c561.706667 0 1024 462.293333 1024 1024h-204.842667zM140.416 743.04a140.8 140.8 0 0 1 140.501333 140.586667A140.928 140.928 0 0 1 140.074667 1024C62.72 1024 0 961.109333 0 883.626667s62.933333-140.544 140.416-140.586667zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667V345.173333c372.352 0 678.784 306.517333 678.784 678.826667z"></path>
</svg>

  </a>
   
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    
      2010 -
    2020
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span><span class="author">
        东海一叶
        
      </span></span>

  
  
    <span id="busuanzi_container">
      访客数/访问量：<span id="busuanzi_value_site_uv"></span>/<span id="busuanzi_value_site_pv"></span>
    </span>
  

  
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont">
        
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

      </i>
    </div>
  </div>
  
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/js/main.638251f4230630f0335d8c6748e53a96f94b72670920b60c09a56fdc8bece214.js" integrity="sha256-Y4JR9CMGMPAzXYxnSOU6lvlLcmcJILYMCaVv3Ivs4hQ=" crossorigin="anonymous"></script>












  
    <script type="text/javascript" src="/js/load-photoswipe.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  




  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>








  <script>
    $("#openSearch, #openSearchMobile").click(function(){
      $(".modal-dialog").addClass("visible");
    });

    $("#closeSearch").click(function(){
      $(".modal-dialog").removeClass("visible");
    });

    $(document).click(function(event) {
    
      if (!$(event.target).closest(".modal-content, #openSearch, #openSearchMobile").length) {
        $("body").find(".modal-dialog").removeClass("visible");
      }
    });
  </script>




  <script src="/js/custom.js"></script>


</body>
</html>
