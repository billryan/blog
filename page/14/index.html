
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Quality Matters">
    <title>Quality Matters</title>
    <meta name="author" content="Yuan Bin">
    
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <meta property="og:type" content="blog">
<meta property="og:title" content="Quality Matters">
<meta property="og:url" content="http://blog.yuanbin.me/page/14/index.html">
<meta property="og:site_name" content="Quality Matters">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Quality Matters">
<meta name="twitter:creator" content="@billryan_yb">
    
    
        
    
    
        <meta property="og:image" content="http://blog.yuanbin.me/assets/images/bill.png"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/font-awesome.css">
    <link rel="stylesheet" href="/assets/css/jquery.fancybox.css">
    <link rel="stylesheet" href="/assets/css/jquery.fancybox-thumbs.css">
    <link rel="stylesheet" href="/assets/css/tranquilpeak.css">
    <!--STYLES END-->
    
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-32317667-4']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">Quality Matters</a>
    </div>
    
        
            <a  class="header-right-icon open-algolia-search"
                href="#search">
        
        
            <i class="fa fa-lg fa-search"></i>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="1">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="/assets/images/bill.png" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">Yuan Bin</h4>
                
                    <h5 class="sidebar-profile-bio"><p>Quality Matters <br/> <a href="http://www.yuanbin.me">http://www.yuanbin.me</a></p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-archives"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link open-algolia-search"
                             href="#search"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-search"></i>
                        <span class="sidebar-button-desc">Search</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/billryan" target="_blank">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                        <span class="sidebar-button-desc">Github</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://twitter.com/billryan_yb" target="_blank">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
                        <span class="sidebar-button-desc">Twitter</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://www.instagram.com/bin.yuan" target="_blank">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-instagram"></i>
                        <span class="sidebar-button-desc">Instagram</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="mailto:yuanbin2014@gmail.com" target="_blank">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-envelope-o"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/atom.xml"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/posts/2014/11/archlinux-network-config.html">
                            Cubieboard2/树莓派之Archlinux网络配置
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2014-11-08T19:26:58+08:00">
	
		    Nov 08, 2014
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/技术/">技术</a>


    
</div>

            </div>
            
                <div class="postShorten-content" itemprop="articleBody">
                    <p>前文<a href="http://blog.billryan.me/posts/2014/11/Cubieboard2-Archlinux-install.html" target="_blank" rel="external">1</a>和<a href="http://blog.billryan.me/posts/2014/11/cubieboard2-arch-config.html" target="_blank" rel="external">2</a>分别就Cubieboard2双卡版的Archlinux系统安装及简单配置做了详细说明，这里就Cubieboard2/树莓派的网络配置做一些说明。</p>
<p>Archlinuxarm安装好之后默认是通过<code>systemd-network</code>服务进行联网的。<del>如果是从比较老的arch系统镜像安装的话则是通过<code>netctl</code>进行管理的。我对新的<code>systemd-network</code>联网方式不熟，实际使用下来感觉没有<code>netctl</code>好使，稍微看了下<code>systemd-network</code>对于网络环境较为复杂的服务器环境有优势，但是那些特性在基于Cubieboard/树莓派的家用服务器则不太可能用的上，所以这里以<code>netctl</code>进行说明。</del></p>
<p>建议使用<code>systemd-network</code>配置网络！文件<code>/etc/systemd/network/eth0.network</code>内容如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">[Match]</div><div class="line">Name=eth0</div><div class="line"></div><div class="line">[Network]</div><div class="line">DNS=127.0.0.1</div><div class="line">DNS=223.5.5.5</div><div class="line">Address=219.228.12x.xx/24</div><div class="line">Gateway=219.228.12x.xxx</div><div class="line"></div><div class="line">DNS=2001:470:20::2</div><div class="line">Address=2001:da8:8000:xxxx::5b21/64</div><div class="line">Gateway=2001:da8:8000:xxxx::1</div></pre></td></tr></table></figure></p>
<h1 id="有线网络"><a href="#有线网络" class="headerlink" title="有线网络"></a>有线网络</h1><h2 id="dhcp方式"><a href="#dhcp方式" class="headerlink" title="dhcp方式"></a>dhcp方式</h2><p>如果确定你的板子一直用dhcp方式联网的话，那么本文对你作用不大，你可以选择看看 <a href="http://blog.billryan.me/tags/cubieboard/" target="_blank" rel="external">Tag: cubieboard</a> 其他文章，或者，猛戳浏览器右上角/左上角的叉叉图标…  </p>
<p>如果你的板子所处网络环境较为复杂，建议使用<code>netctl</code>替代<code>systemd-network</code>管理网络。步骤如下：  </p>
<ol>
<li>禁止<code>systemd-networkd</code>开机启动：<code>sudo systemctl disable systemd-networkd</code>  </li>
<li>拷贝<code>netctl</code>的<code>dhcp</code>配置文件：<code>sudo cp /etc/netctl/examples/ethernet-dhcp /etc/netctl/</code>  </li>
<li>适当修改文件<code>ethernet-dhcp</code>中的网络接口名，确定是否和当前需要dhcp的网络接口名一致。  </li>
<li>以太网口接入网线时启动<code>dhcp</code>服务，拔出网线时关闭相应网络接口：<code>sudo systemctl enable netctl-ifplugd@eth0</code>，<code>eth0</code>为你的网卡名。 </li>
</ol>
<h2 id="静态IP"><a href="#静态IP" class="headerlink" title="静态IP"></a>静态IP</h2><p>这种联网方式相对较为复杂，往往还有些其它问题需要解决。  </p>
<h3 id="MAC地址克隆"><a href="#MAC地址克隆" class="headerlink" title="MAC地址克隆"></a>MAC地址克隆</h3><p>以我交为例，研究生寝室每人一个端口，根据网卡的MAC绑定相应的静态IP(是全球可路由的噢～)。虽然可以通过<a href="http://nimo.sjtu.edu.cn" target="_blank" rel="external">SJTU-NIMO!学生宿舍网络信息系统</a>在线申请MAC地址更换，但平白无故给网管添麻烦也挺损RP的 :( Arch的<a href="https://wiki.archlinux.org/index.php/MAC_address_spoofing" target="_blank" rel="external">wiki</a>上总结了若干种MAC地址欺骗的方法，这里我以<a href="https://wiki.archlinux.org/index.php/MAC_address_spoofing#Method_2:_systemd-udevd" target="_blank" rel="external">systemd-udevd</a>方法进行说明。树莓派可以在<code>/boot/configxxx</code>中配置，不必使用这种复杂的方式。</p>
<ol>
<li>创建<code>udevd</code>规则文件：<code>sudo vim /etc/udev/rules.d/75-net-fix-mac.rules</code>  </li>
<li>在文件<code>75-net-fix-mac.rules</code>中写入一行<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ACTION==&quot;add&quot;, SUBSYSTEM==&quot;net&quot;, ATTR&#123;address&#125;==&quot;02:03:09:82:4c:xx&quot;, RUN+=&quot;/usr/bin/ip link set dev %k address c8:0a:a9:1c:87:xx&quot;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>其中<code>02:03:09:82:4c:xx</code>为之前系统读到的MAC地址，<code>c8:0a:a9:1c:87:xx</code>则是你需要更改到的MAC地址。好了，下次开机时<code>udev</code>即可读到这条配置文件。</p>
<h3 id="获取IPV6地址"><a href="#获取IPV6地址" class="headerlink" title="获取IPV6地址"></a>获取IPV6地址</h3><p>目前大多数高校已支持IPV4/IPV6双栈运行，而且通过IPV6接入网络可以免流量，「免流量」对于大多数高校还是很有吸引力的！不过我交不对学生收取网络费用，嘛，流量是个什么玩意儿？≖‿≖✧ </p>
<p>树莓派的<code>/boot/cmdline.txt</code>中有开启IPV6协议栈的选项，开启即可。Cubieboard2的Archlinux则默认开启，不必做多余配置。通过<code>sudo dhcpcd eth0</code>可以获取到临时的IPV6地址，如<code>2001:da8:8000:xxxx::xxxx/128</code>，记下这个地址。需要注意的是这里通过<code>DHCPv6</code>获取到的IPV6子网掩码为128位，没关系，设置静态IP时改为64即可～  </p>
<h3 id="启用静态IP"><a href="#启用静态IP" class="headerlink" title="启用静态IP"></a>启用静态IP</h3><ol>
<li>拷贝<code>netctl</code>的<code>static</code>配置文件：<code>sudo cp /etc/netctl/examples/ethernet-static /etc/netctl/</code>  </li>
<li>适当修改文件<code>ethernet-static</code>中的网络接口名，确定是否和当前需要dhcp的网络接口名一致。  </li>
<li>修改静态IP配置，以我的Cubieboard2为例：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">Description=&apos;A basic static ethernet connection&apos;</div><div class="line">Interface=eth0</div><div class="line">Connection=ethernet</div><div class="line">IP=static</div><div class="line">Address=(&apos;219.228.xxx.60/24&apos;)</div><div class="line">#Routes=(&apos;192.168.0.0/24 via 192.168.1.2&apos;)</div><div class="line">Gateway=&apos;219.228.xxx.254&apos;</div><div class="line">DNS=(&apos;202.120.2.101&apos;)</div><div class="line"></div><div class="line">## For IPv6 autoconfiguration</div><div class="line">#IP6=stateless</div><div class="line"></div><div class="line">## For IPv6 static address configuration</div><div class="line">IP6=static</div><div class="line">#Address6=(&apos;1234:5678:9abc:def::1/64&apos; &apos;1234:3456::123/96&apos;)</div><div class="line">Address6=(&apos;2001:da8:8000:xxxx::671f/64&apos;)</div><div class="line">#Routes6=(&apos;abcd::1234&apos;)</div><div class="line">#Gateway6=&apos;1234:0:123::abcd&apos;</div><div class="line">Gateway6=&apos;2001:da8:8000:xxxx::1&apos;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>其中的<code>xxx</code>根据实际IP更改。</p>
<p>以太网口接入网线时启动静态IP，拔出网线时关闭相应网络接口：<code>sudo systemctl enable netctl-ifplugd@eth0</code>，<code>eth0</code>为你的网卡名。 </p>
<p>细心的你可能注意到了，假如目录<code>/etc/netctl</code>下存在多份配置文件如何破？对网络接口<code>eth0</code>启用<code>netctl-ifplugd</code>服务时，<code>netctl</code>会读取目录<code>/etc/netctl</code>的所有可用配置文件并尝试依次启动，直至成功为止。所以说刚开始配置系统时可以同时启用<code>dhcp</code>和<code>static</code>以便调试，系统网络配置好之后即可将不需要的配置文件删除以加快开机时的联网速度。</p>
<p>以上均为针对以太网的联网方法，主要用到了<code>netctl-ifplugd</code>实现插拔网线的网络自动配置。如果你觉得我说的不够清楚，那么Arch的wiki是你的好去处-<a href="https://wiki.archlinux.org/index.php/Network_configuration" target="_blank" rel="external">Network configuration - Wired(有线网络)</a>。</p>
<p>接下来就无线网络连接做一些简要说明。</p>
<h1 id="无线网络"><a href="#无线网络" class="headerlink" title="无线网络"></a>无线网络</h1><p>鉴于Cubieboard2/树莓派只提供最基本的硬件板，其他配件如电源、无线网卡等需要自己选购。对于无线网卡的选型，<strong>建议选择Ralink家的芯片，千万不要去买Realtek的网卡。</strong>究其原因则是由于Realtek的无线网卡对Linux极其不友好，在较新的Linux内核下驱动不了是常有的事。大量使用Ralink家芯片的厂商不多，我所知的像Comfast有大量基于Ralink的无线网卡出售，在某萌猫旗舰店上买时注意300Mb的通常是Realtek的芯片，150Mb的多为Ralink，各位看官买的时候务必擦亮你雪亮的眼睛！</p>
<p>首先安装进行无线网络连接所需的软件包，<code>yaourt -S wpa_actiond wpa_supplicant dialog</code>，安装好之后即可启用自动联网功能-<code>sudo systemctl enable netctl-auto@wlan0</code></p>
<h2 id="非IEEE-802-1x加密-即常见的WPA-WPA2等家用路由器上的加密方式"><a href="#非IEEE-802-1x加密-即常见的WPA-WPA2等家用路由器上的加密方式" class="headerlink" title="非IEEE 802.1x加密(即常见的WPA/WPA2等家用路由器上的加密方式)"></a>非IEEE 802.1x加密(即常见的WPA/WPA2等家用路由器上的加密方式)</h2><p>首先使用<code>sudo wifi-menu</code>查看当前能搜索到的热点，输入密码后即在目录<code>/etc/netctl</code>下生成相应配置文件。下次启动时系统会从目录<code>/etc/netctl</code>读取可用的无线网络配置文件进行无线网络连接。</p>
<h2 id="IEEE-802-1x-EAP"><a href="#IEEE-802-1x-EAP" class="headerlink" title="IEEE 802.1x/EAP"></a>IEEE 802.1x/EAP</h2><p>在学校这种场所，以我交为例，SSID为<code>SJTU</code>的热点部署在校园的每个角落，如实验室、体育馆、教室和图书馆等都有<code>SJTU</code>带来的电磁波。如果仍然使用<code>wifi-menu</code>的方式去联网，会发现无法连接。这是因为学校这种场所提供的是IEEE 802.1x加密方式，这里我们只能手动复制一份适用于IEEE 802.1x环境下的配置文件了。</p>
<p>添加配置文件，<code>sudo vim /etc/netctl/wlan0-sjtu</code>，下面贴出我在交大用的配置文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">Description=&apos;A wireless connection using a custom network block configuration&apos;</div><div class="line">Interface=wlan0</div><div class="line">Connection=wireless</div><div class="line">Security=wpa-configsection</div><div class="line">IP=dhcp</div><div class="line">WPAConfigSection=(</div><div class="line">    &apos;ssid=&quot;SJTU&quot;&apos;</div><div class="line">    &apos;key_mgmt=WPA-EAP IEEE8021X&apos;</div><div class="line">    &apos;eap=PEAP&apos;</div><div class="line">    &apos;identity=&quot;username&quot;&apos;</div><div class="line">    &apos;password=&quot;password&quot;&apos;</div><div class="line">)</div></pre></td></tr></table></figure></p>
<p>将<code>wlan0</code>替换为你的无线网卡名，<code>username</code>和<code>password</code>分别替换为你的jaccount帐号密码。启动<code>netctl-auto</code>服务即可完成自动联网-<code>sudo systemctl start netctl-auto@wlan0</code></p>
<p>关于Archlinux下无线网络的联网可参考 <a href="https://wiki.archlinux.org/index.php/Wireless_network_configuration" target="_blank" rel="external">Wireless network configuration</a> 和 <a href="https://wiki.archlinux.org/index.php/Netctl" target="_blank" rel="external">netctl</a></p>

                    
                        
                    
                    
                        <p>
                            <a href="/posts/2014/11/archlinux-network-config.html#post-footer" class="postShorten-excerpt_link link">
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-right" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/posts/2014/11/cubieboard2-arch-config.html">
                            Cubieboard2/树莓派之Archlinux系统配置
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2014-11-07T17:21:14+08:00">
	
		    Nov 07, 2014
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/技术/">技术</a>


    
</div>

            </div>
            
                <div class="postShorten-excerpt" itemprop="articleBody">
                    <p>上文 <a href="http://blog.billryan.me/posts/2014/11/Cubieboard2-Archlinux-install.html">Cubieboard2之Archlinux安装指南</a> 中谈到了Archlinux在Cubieboard2上的安装过程，尤其是总结了一些针对双卡版的hack及注意事项。这篇blog就谈谈安装好基本系统之后的一些环境及应用配置。</p>
<p>P.S. 相关文章可见<a href="http://blog.billryan.me/tags/cubieboard/">Tag: cubieboard</a><br>
                    
                        <a href="/posts/2014/11/cubieboard2-arch-config.html" class="postShorten-excerpt_link link">
                            Continue reading
                        </a>
                        
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/posts/2014/11/Cubieboard2-Archlinux-install.html">
                            Cubieboard2之Archlinux安装指南
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2014-11-06T15:56:23+08:00">
	
		    Nov 06, 2014
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/技术/">技术</a>


    
</div>

            </div>
            
                <div class="postShorten-content" itemprop="articleBody">
                    <p>Cubieboard2目前有两个版本，一个是后来推出的<a href="http://cubie.cc/forum.php?mod=viewthread&amp;tid=2618" target="_blank" rel="external">Cubieboard2双卡版</a>，双卡版将原来板载的Nand Flash换成了一个TF卡槽，折腾起来更为方便了，全志A20的CPU性能还是不错的，性价比也非常高，不到300就可以拿下。  </p>
<p>Archlinuxarm官方是支持Cubieboard2的，不管是双卡版还是之前的普通版，首先按照Arch Linux ARM官网 <a href="http://archlinuxarm.org/platforms/armv7/allwinner/cubieboard-2" target="_blank" rel="external">Cubieboard 2</a> 提供的步骤安装好。  </p>
<p>在第3步创建文件系统时，如果想延长你的micro-SD卡使用寿命的话，建议禁用ext4的日志功能。禁用ext4的日志功能可参考<a href="http://fenidik.blogspot.com/2010/03/ext4-disable-journal.html" target="_blank" rel="external">ext4 disable journal</a>，我在印象笔记中公开了其<a href="https://app.yinxiang.com/shard/s14/sh/326390d4-8a28-40d2-9e5d-d34357b59ccf/698a8d3b14d05a70ffb99fbb1b0f125b" target="_blank" rel="external">镜像内容</a>。Stackexchange的Raspberry PI节点有对如何延长SD卡的使用时间进行讨论，见<a href="http://raspberrypi.stackexchange.com/questions/169/how-can-i-extend-the-life-of-my-sd-card" target="_blank" rel="external">durability - How can I extend the life of my SD card?</a>  </p>
<p>第4步中如果到官网下载根文件系统较慢时可从国内中科大的软件源中下载，根文件系统文件见<a href="http://mirrors.ustc.edu.cn/archlinuxarm/os/ArchLinuxARM-sun7i-latest.tar.gz" target="_blank" rel="external">ArchLinuxARM-sun7i-latest.tar.gz</a>。  </p>
<p>对于双卡版来说，在第5步中安装好U-Boot bootloader之后还需做进一步处理，否则无法同时启用两个TF卡槽。这里可参考<a href="http://cubie.cc/forum.php?mod=viewthread&amp;tid=3173" target="_blank" rel="external">CubieBoard2 双卡版 archlinux设置</a>，我编译好的<code>script.bin</code>可从<a href="/downloads/script.bin">这里</a>下载。  </p>
<p>随后将写好系统的micro-SD卡插入板子上面的<code>data card</code>卡槽，将网线接入到能<code>dhcp</code>的LAN口，最后一步当然是上电啦 :)  </p>
<p>由于双卡版启用了两个micro-SD卡槽，板子背面的是boot card，正面是data card。这一小小的硬件改动带来了不少问题，首先是系统引导，如果选用的是Cubian，则相应的SD卡应该置于板子背面，这个和Cubie官方的一些教程是一样的。但是！！如果安装的是Archlinux，dd后的SD卡应该置于板子正面才能正常启动！！！这个坑我是前几天才发现的，之前一直放在板子背面，即使用了Cubian中的uImage，也总是有诡异的问题，比如驱动问题。也因为此，我买的双卡版之前闲置了好几个月，不能用Arch伐开心 :(  </p>
<p>这里我默认你没有hdmi视频输出或者USB转TTL串口线，所以说只能通过ssh的方式接入cubieboard2了咯。cubieboard2的archlinuxarm发行版默认是以<code>dhcp</code>的方式接入网络，所以我们第一步就是要找到cubieboard2的IP地址。首先看能否在路由器Web管理界面中查看到各设备的IP，出于各种原因你可能进不了路由器的Web管理界面，这个时候就该祭出端口扫描工具这一大招了。</p>
<p>路由器下主机数不多的话使用<code>nmap -sP 192.168.18.0/24</code>即可看到不同IP所对应的主机名，<code>192.168.18.0</code>应该替换为你当前路由器的网络地址。archlinuxarm常用的默认主机名为<code>alarm</code>，找到有<code>alarm</code>标识的相应IP即可定位Cubieboard2的真身。接下来就可以ssh进去干你想做的任何事情了。至此Cubieboard2上的Archlinux安装就告一段落了 :)</p>
<p>关于Cubieboard2上的所有构建过程可参考我公开的<a href="https://trello.com/b/RCJSmgrF/cubieboard2-daulcard" target="_blank" rel="external">cubieboard2-daulcard | Trello</a>。</p>
<p>后期会陆续将自己在Cubieboard2上搭建家庭媒体服务器(<code>minidlna</code>)，<a href="https://github.com/sjtug/kxsw/wiki/Best-Practice" target="_blank" rel="external">科学的上网工具</a>，BT下载器(transmission)，远程下载(aria2)，无线路由器(<code>create_ap</code>)…等做详细说明。</p>
<p>P.S. 相关文章可见<a href="http://blog.billryan.me/tags/cubieboard/" target="_blank" rel="external">Tag: cubieboard</a></p>

                    
                        
                    
                    
                        <p>
                            <a href="/posts/2014/11/Cubieboard2-Archlinux-install.html#post-footer" class="postShorten-excerpt_link link">
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        <li class="pagination-prev">
            
                <a class="btn btn--default btn--small" href="/page/13/">
            
                <i class="fa fa-angle-left text-base icon-mr"></i>
                    <span>NEWER POSTS</span>
            </a>
        </li>
        
        
        <li class="pagination-next">
            <a class="btn btn--default btn--small" href="/page/15/">
                    <span>OLDER POSTS</span>
                <i class="fa fa-angle-right text-base icon-ml"></i>
            </a>
        </li>
        
        <li class="pagination-number">page 14 of 32</li>
    </ul>
</div>

</section>


                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2016 Yuan Bin. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/bill.png" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">Yuan Bin</h4>
        
            <div id="about-card-bio"><p>Quality Matters <br/> <a href="http://www.yuanbin.me">http://www.yuanbin.me</a></p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Software Developer</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                China, Shanghai
            </div>
        
    </div>
</div>

        <div id="algolia-search-modal" class="modal-container">
    <div class="modal">
        <div class="modal-header">
            <span class="close-button"><i class="fa fa-close"></i></span>
            <a href="https://algolia.com" target="_blank" class="searchby-algolia text-color-light link-unstyled">
                <span class="searchby-algolia-text text-color-light text-small">by</span>
                <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
            </a>
            <i class="search-icon fa fa-search"></i>
            <form id="algolia-search-form">
                <input type="text" id="algolia-search-input" name="search"
                    class="form-control input--large search-input" placeholder="Search "
                    autofocus="autofocus"/>
            </form>
        </div>
        <div class="modal-body">
            <div class="no-result text-color-light text-center">no post found</div>
            <div class="results">
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://blog.yuanbin.me/posts/2010/12/dian-zi-zhi-zuo-zhi-chu-nu-zuo-xi-dian-dong-tai-xiao-hui.html">
                            <h3 class="media-heading">电子制作之处女作-西电动态校徽</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Dec 13, 2010
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://blog.yuanbin.me/posts/2012/01/ASCII码之大小写那些事儿.html">
                            <h3 class="media-heading">ASCII码之大小写那些事儿</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Jan 11, 2012
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>原帖发在<a href="http://xdlinux.info/bbs/thread-1244-1-1.html">开源社区论坛</a>上，感觉还有点意思，于是乎就搬到这儿来了咯～本帖探讨ASCII码编码中英文字母大小写编码的相关问题，不需要读者具有计算机编码方面的专业知识，当然咯，为了更好地参与讨论，一点点计算机编码的基本常识还是要有的。<br>不知ASCII码为何物的请先移步<a href="http://en.wikipedia.org/wiki/ASCII">维基百科</a>  </p>
<h3 id="故事的起源"><a href="#故事的起源" class="headerlink" title="故事的起源"></a>故事的起源</h3><p>Long long ago, 也就是上个学期微机原理课的时候，班上一MM问了老师这么一个问题——“ASCII码中大写字母A的十六进制代码是41，而小写字母的十六进制代码是61，中间不是只能编码20个字符么，那剩下的那6个大写字母跑哪去了呀？” 只见此时老师笑而不语(显然是男老师…)，底下一小撮明白真相的群众疾呼:“那个41和61是十六进制呀！”   </p>
<p>MM思维敏捷，很快又出现了新的问题:“41H和61H之间可以编码32个字符呀，那为什么小写字母不紧跟着大写字母编码呢？大小写字母连在一起多和谐呀~” 说时迟，那时快，老师答曰:“这个问题…我得先请示一下Google”。听MM刚才那么一说，52个大小写字母顿时哼起了:“让我们 握着手 手牵手 一起走到时间的尽头…” 但在得到美国国家标准化委员会的确切答复后，大A和小a只能率领50个兄弟姐妹以头跄地曰:“千杀的委员会！滥用手中的职权割断我们大写家族和小写家族之间的脐带！小心我叫老母亲来收拾你们！” 在这里我想为标准化委员会说几句话，人家帮你割断脐带是为了让小写家族得到新生呀！！欲知后事如何，且听下段分析。<br></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://blog.yuanbin.me/posts/2012/01/武汉七日游.html">
                            <h3 class="media-heading">武汉「七日游」流水帐之交通&amp;amp;下厨&amp;amp;华科篇</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Jan 24, 2012
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>右眼已经差不多好了，趁着脑海里还残留些记忆，是时候把寒假期间的流水帐记一下了<em> 自西安南下至今也没见过太阳公公，更别说他儿子老母了… 从1月13号上午11点到武昌到19号早上离开武汉差不多整整7天吧，7天里每天都下雨，只有在第2天和第6天的时候出去逛了下</em> 来武汉的目的主要还是为了了却08年的心愿——看看真实的华科到底是么样子_ OK,流水帐正式开始</p>
<h2 id="交通篇"><a href="#交通篇" class="headerlink" title="交通篇"></a>交通篇</h2><p>武汉的公交的恶劣情况早有耳闻，百闻不如一见，13号上午11点坐公交时我彻底震惊了，一个小女孩不要命似的保护着两个座位，由此可知武汉公交的座位是有好珍贵。</p>
<p>在公交上坐了差不多半个小时我就受不了了，胃酸都快吐出来了，估计是一个上午一点东西都没吃的恶果，原以为12号晚上在橙色心情美美地吃了一顿就不用再吃了，但是…坑爹的K896，丫的进入武汉市内的时候就变蜗牛了，慢慢地爬了半个小时才到站，于是乎又多饿了半个小时(12号走的过于匆忙，一点吃的东西也没买)，到公交上呕吐也很正常啦，于是乎果断下车换了Taxi，跑了半个多小时才到目的地（也就是我舅舅家啦，武汉分为三大块-武昌、汉口、汉阳，我舅舅家住在武昌的最东边差不多），武汉是有好大_</p>
<p>14号和舅舅舅母一起出去买了点东西，倒了趟公交，每辆公交上似乎都是那么挤，我上车后过了两站就被挤到里边去了，别说肉饼，我都快被挤成肉酱了！过了差不多2个小时终于下车了！！！那个时候我还在感概，武汉这么大，公交这么挤，还让人活不，要是我住在这种地方我一年都不想出来一次，东西通通网购，后来仔细看了下武汉市地图，我才发现原来武汉并没有想像中的那么大嘛，不过也不愧对“千湖之省”的称号，丫的水陆面积比目测接近1：2，长江+东湖+汉江至少占四分之一的面积，所以咧，武汉的道路似乎没有一条是直的，完全无方向可言，不知道北方的朋友到了武汉之后会不会比较容易迷路。<br></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
            </div>
        </div>
        <div class="modal-footer">
            <p class="results-count text-medium"
                data-message-zero="no post found"
                data-message-one="1 post found"
                data-message-other="{n} posts found">
                94 posts found
            </p>
        </div>
    </div>
</div>
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/jquery.js"></script>
<script src="/assets/js/jquery.fancybox.js"></script>
<script src="/assets/js/jquery.fancybox-thumbs.js"></script>
<script src="/assets/js/tranquilpeak.js"></script>
<!--SCRIPTS END-->



    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.14.1/moment-with-locales.min.js"></script>
    <script src="//cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
    <script>
        var algoliaClient = algoliasearch('JR5AN1IRYS', 'a400faf3b8075c5354366b0508f4fed9');
        var algoliaIndex = algoliaClient.initIndex('blog');
    </script>

    </body>
</html>
